@using InventoryManagementMVC.Extensions
@using InventoryManagementMVC.Models;
@using RecipiesModelNS;


@model IEnumerable<PurchaseOrderDetailViewModel>

@(
        Html.Kendo().Grid(Model)
            .Columns(columns =>
            {
                columns.ForeignKey(p => p.PurchaseOrderHeaderId, (System.Collections.IEnumerable) ViewData["purchaseOrderHeaders"], "PurchaseOrderId", "PurchaseOrderId")
                    .Title("Purchase Order").FooterTemplate(f => f.Count.Format("Count: {0}"))
                    .GroupFooterTemplate(f => f.Count.Format("Count: {0}"));
                columns.ForeignKey(p => p.UnitMeasureId, (System.Collections.IEnumerable) ViewData["unitMeasures"], "UnitMeasureId", "Name")
                    .Title("Unit").FooterTemplate(f => f.Count.Format("Count: {0}"))
                    .GroupFooterTemplate(f => f.Count.Format("Count: {0}"));
                columns.ForeignKey(p => p.ProductId, (System.Collections.IEnumerable) ViewData["products"], "ProductId", "Name")
                    .Title("Product").FooterTemplate(f => f.Count.Format("Count: {0}"))
                    .GroupFooterTemplate(f => f.Count.Format("Count: {0}"));
            })
            .AddReadOnlyOptions()
            //.ReadOnlyOptions() 
            .DataSource(dataSource => dataSource
                .Ajax()
                .Read("Read", "PurchaseOrderDetail")
            )
      )