@using InventoryManagementMVC.Extensions
@using InventoryManagementMVC.Models.Purchasing;
@using InventoryManagementMVC.Models;


@model IEnumerable<PurchaseOrderHeaderViewModel>

@(
        Html.Kendo().Grid(Model)
            .AddDefaultOptions()
            .ClientDetailTemplateId("template")
            .Columns(columns =>
            {
                //columns.ForeignKey(p => p.c, (System.Collections.IEnumerable)ViewData["purchaseOrderHeaders"], "PurchaseOrderId", "PurchaseOrderId")
                //    .Title("Purchase Order").ClientFooterTemplate("Count: #=count#")
                //                    .ClientGroupFooterTemplate("Count: #=count#");
                //columns.ForeignKey(p => p.UnitMeasureId, (System.Collections.IEnumerable)ViewData["unitMeasures"], "UnitMeasureId", "Name")
                //    .Title("Unit").ClientFooterTemplate("Count: #=count#")
                //                    .ClientGroupFooterTemplate("Count: #=count#");
                //columns.ForeignKey(p => p.ProductId, (System.Collections.IEnumerable)ViewData["products"], "ProductId", "Name")
                //    .Title("Product").ClientFooterTemplate("Count: #=count#")
                //                    .ClientGroupFooterTemplate("Count: #=count#");
            })
            //.ReadOnlyOptions()
            .DataSource(dataSource => dataSource
                .Ajax()
                .Read("Read", "PurchaseOrderHeader")
                .Create("Create", "PurchaseOrderHeader")
                .Update("Update", "PurchaseOrderHeader")
                .Destroy("Destroy", "PurchaseOrderHeader")
            )

      )

<script id="template" type="text/kendo-tmpl">
    @(Html.Kendo().Grid<PurchaseOrderDetailViewModel>()
          .Name("test")
          .AddDefaultOptions(true)
          .DataSource(dataSource => dataSource
              .Ajax()
              .Batch(true)
              .PageSize(5).Model(m => m.Id(p => p.PurchaseOrderDetailId))
              .Read(read => read.Action("Read", "PurchaseOrderDetail", new {purchaseOrderHeaderId = "#=PurchaseOrderHeaderId#"}))
              .Create("Create", "PurchaseOrderDetail")
              .Update("Update", "PurchaseOrderDetail")
              .Destroy("Destroy", "PurchaseOrderDetail")
          )
          .ToClientTemplate()
          //  .DataSource(dataSource => dataSource
          //.Ajax()
          //.Read("Read", "PurchaseOrderHeader")
          //.Create("Create", "PurchaseOrderHeader")
          //.Update("Update", "PurchaseOrderHeader")
          //.Destroy("Destroy", "PurchaseOrderHeader"))

          //.ToClientTemplate()

          )
</script>